<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="ConstraintLayout是AndroidStudio2.2新增的一个功能，那么这个到底是什么呢？首先第一点我们知道传统的安卓开发，页面基本都是XML编写实现，特别在一些复杂的页面上需要嵌套多层，降低了页面加载的效率，因为ConstraintLayout就可以很好的优化布局，还有一点我们羡慕I">
    

    <!--Author-->
    
        <meta name="author" content="icuihai">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="全网最清晰的ConstraintLayout教程"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Ich&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>全网最清晰的ConstraintLayout教程 - Ich&#39;s Blog</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="Ich's Blog">
            <img src="http://p6nix480q.bkt.clouddn.com/18-7-6/36041900.jpg" class="dib h3" alt="Ich's Blog">
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="Home">
                    Home
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/archives" 
                    title="Archives">
                    Archives
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/tags" 
                    title="Tags">
                    Tags
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/categories" 
                    title="Categories">
                    Categories
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/about.html" 
                    title="About">
                    About
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/contact.html" 
                    title="Contact">
                    Contact
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">全网最清晰的ConstraintLayout教程</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2018-07-19</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/ConstraintLayout/">#ConstraintLayout</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <p>ConstraintLayout是AndroidStudio2.2新增的一个功能，那么这个到底是什么呢？首先第一点我们知道传统的安卓开发，页面基本都是XML编写实现，特别在一些复杂的页面上需要嵌套多层，降低了页面加载的效率，因为ConstraintLayout就可以很好的优化布局，还有一点我们羡慕IOS的拖拽XML页面在这里也可以更好的实现。当然我所说的以上两点都是优化以前的布局，这也是Google极力要做的事情</p>
<h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><p>想要使用ConstraintLayout，首先AS版本必须升级到2.2以上(我基本都是逢新必更)，首先需要在app/build.gradle文件中添加ConstraintLayout依赖</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'com.android.support.constraint:constraint-layout:1.1.2'</span></span><br></pre></td></tr></table></figure>
<p>然后在项目的build.gradle文件buildscript和allprojects的repositories中添加google()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后同步就可以愉快的使用ConstraintLayout了~~</p>
<p>首先我们按照Google文档的顺序依次学习<a href="https://developer.android.com/reference/android/support/constraint/ConstraintLayout" target="_blank" rel="noopener">https://developer.android.com/reference/android/support/constraint/ConstraintLayout</a> 先来一波api</p>
<h3 id="1-layout-constraint-自身控件位置-to-目标控件位置-Of-quot-目标控件ID-quot"><a href="#1-layout-constraint-自身控件位置-to-目标控件位置-Of-quot-目标控件ID-quot" class="headerlink" title="1. layout_constraint[自身控件位置]_to[目标控件位置]Of==&quot;[目标控件ID]&quot;"></a>1. <code>layout_constraint[自身控件位置]_to[目标控件位置]Of==&quot;[目标控件ID]&quot;</code></h3><ul>
<li><code>layout_constraintLeft_toLeftOf</code></li>
<li><code>layout_constraintLeft_toRightOf</code></li>
<li><code>layout_constraintRight_toLeftOf</code></li>
<li><code>layout_constraintRight_toRightOf</code></li>
<li><code>layout_constraintTop_toTopOf</code></li>
<li><code>layout_constraintTop_toBottomOf</code></li>
<li><code>layout_constraintBottom_toTopOf</code></li>
<li><code>layout_constraintBottom_toBottomOf</code></li>
<li><code>layout_constraintBaseline_toBaselineOf</code></li>
<li><code>layout_constraintStart_toEndOf</code></li>
<li><code>layout_constraintStart_toStartOf</code></li>
<li><code>layout_constraintEnd_toStartOf</code></li>
<li><code>layout_constraintEnd_toEndOf</code></li>
</ul>
<p>看到这些猜也能猜出个大概~比如layout_constraintLeft_toLeftOf就是说当前控件的Left在目标控件的Left上。如果目标控件为父控件则id可以直接写成parent。比如要实现B控件在A控件右面,则在B控件中设置layout_constraintLeft_toRightOf。意思就是说B控件的左面在A控件的右面~</p>
<p><img src="http://p6nix480q.bkt.clouddn.com/18-7-20/66183732.jpg" alt="图片标题"></p>
<h3 id="2-Margins"><a href="#2-Margins" class="headerlink" title="2. Margins"></a>2. Margins</h3><ul>
<li><code>android:layout_marginStart</code></li>
<li><code>android:layout_marginEnd</code></li>
<li><code>android:layout_marginLeft</code></li>
<li><code>android:layout_marginTop</code></li>
<li><code>android:layout_marginRight</code></li>
<li><code>android:layout_marginBottom</code></li>
</ul>
<p>这个与之前其他viewgroup属性一致，不一样的就是多了以下几点：</p>
<ul>
<li><code>layout_goneMarginStart</code></li>
<li><code>layout_goneMarginEnd</code></li>
<li><code>layout_goneMarginLeft</code></li>
<li><code>layout_goneMarginTop</code></li>
<li><code>layout_goneMarginRight</code></li>
<li><code>layout_goneMarginBottom</code></li>
</ul>
<p>goneMargin属性是指目标控件GONE掉之后，自身控件可以设置个margin值，这里有一点需要敲黑板，目标控件就是相对于的那个控件</p>
<h3 id="3-Bias"><a href="#3-Bias" class="headerlink" title="3. Bias"></a>3. Bias</h3><ul>
<li><code>layout_constraintHorizontal_bias`</code></li>
<li><code>layout_constraintVertical_bias</code></li>
</ul>
<p>这个属性的意思是可以使用偏差属性调整定位以使一侧偏向另一侧，即控件距离左右百分比（<code>layout_constraintHorizontal_bias</code>）和距离上下百分比（layout_constraintVertical_bias）</p>
<p><img src="http://p6nix480q.bkt.clouddn.com/18-7-21/10331206.jpg" alt="图片标题"></p>
<h3 id="4-WRAP-CONTENT-enforcing-constraints-Added-in-1-1"><a href="#4-WRAP-CONTENT-enforcing-constraints-Added-in-1-1" class="headerlink" title="4. WRAP_CONTENT : enforcing constraints (*Added in 1.1*)"></a>4. WRAP_CONTENT : enforcing constraints (<strong>*Added in 1.1*</strong>)</h3><p>强制约束</p>
<ul>
<li><code>app:layout_constrainedWidth=”true|false”</code></li>
<li><code>app:layout_constrainedHeight=”true|false”</code></li>
</ul>
<p>true代表防止约束失效，默认为false，比如：B在A的右边app:layout_constraintLeft_toRightOf=”@+id/a”，但是当A的内容越来越多并且超过了A到父控件最右的距离，此时就会约束失效使B的一部分出现了A的非右边。如果B设置了该属性为true，则B始终出现在A的右边，不会发生约束失效</p>
<h3 id="5-Ratio"><a href="#5-Ratio" class="headerlink" title="5. Ratio"></a>5. Ratio</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constraintDimensionRatio="H,16:9"</span><br></pre></td></tr></table></figure>
<p>不用多说百分比布局是android中常用的一种适配布局H或W则代表以高或宽为基准</p>
<h3 id="6-Guideline"><a href="#6-Guideline" class="headerlink" title="6. Guideline"></a>6. Guideline</h3><p>layout_constraintGuide_begin   距离父容器起始位置的距离（左侧或顶部）</p>
<p>layout_constraintGuide_end    距离父容器结束位置的距离（右侧或底部）</p>
<p>layout_constraintGuide_percent    距离父容器宽度或高度的百分比</p>
<p>其实很好理解，比如</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.Guideline</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:id</span>=<span class="string">"@+id/guide1"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.5"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">android.support.v7.widget.AppCompatButton</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">"@+id/guide1"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>则表示在垂直方向上画一根基准线（只是参考线，并不进行view绘制）然后其他控件可以根据这条线进行放置</p>
<p><img src="http://p6nix480q.bkt.clouddn.com/18-7-21/96392905.jpg" alt="图片标题"></p>
<h3 id="7-Barrier"><a href="#7-Barrier" class="headerlink" title="7. Barrier"></a>7. Barrier</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.AppCompatButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/a"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"a"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.AppCompatButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/b"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"bbbbbbbbbbbbbbb"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">"@+id/a"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.AppCompatButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/c"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"c"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">"@+id/barrier"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.constraint.Barrier</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/barrier"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:barrierDirection</span>=<span class="string">"right"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraint_referenced_ids</span>=<span class="string">"a,b"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://p6nix480q.bkt.clouddn.com/18-7-21/10482726.jpg" alt="图片标题"></p>
<p>显而易见，你可以把他看做一个容器constraint_referenced_ids=控件id，然后把这些控件看做一个整体</p>
<h3 id="8-Group"><a href="#8-Group" class="headerlink" title="8. Group"></a>8. Group</h3><p>它和Barrier有异曲同工之处，相同的都是你可以把他们看做一个容器，不同的是他是控制整个容器之中的所有的控件的可见或者不可见，比如android:visibility=”gone”，那它所包裹的左右控件都会gone。</p>
<p>当然ConstraintLayout的Api不止这些，需要我们真真切切的去使用它，你会发现它真的很好用~</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p>Android开发文档 [Developer][<a href="https://developer.android.com/reference/android/support/constraint/ConstraintLayout]" target="_blank" rel="noopener">https://developer.android.com/reference/android/support/constraint/ConstraintLayout]</a></p>

                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/ConstraintLayout/">#ConstraintLayout</a>
                        </div>
                    

                    <!-- Comments -->
                    



                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="http://p6nix480q.bkt.clouddn.com/18-9-15/68427294.jpg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="icuihai">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>Recent Posts</h3>
    
        <p>
            <a href="/2018/07/19/全网最清晰的ConstraintLayout教程/">全网最清晰的ConstraintLayout教程</a>
        </p>
    
        <p>
            <a href="/2018/06/27/Android7-1-1Toast崩溃解决方案/">Android7.1.1Toast崩溃解决方案</a>
        </p>
    
        <p>
            <a href="/2018/04/04/编译Android下可执行命令的FFmpeg/">编译Android下可执行命令的FFmpeg</a>
        </p>
    
        <p>
            <a href="/2018/03/30/交叉编译-Mac环境使用NDK编译FFmpeg/">交叉编译-Mac环境使用NDK编译FFmpeg</a>
        </p>
    
        <p>
            <a href="/2018/03/15/使用Hexo搭建免费Blog/">使用Hexo搭建免费Blog</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://twitter.com/?lang=en" target="_blank">
                            <i class="fa fa-twitter"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://www.facebook.com/" target="_blank">
                            <i class="fa fa-facebook"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://dribbble.com/" target="_blank">
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/icuihai" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://plus.google.com/" target="_blank">
                            <i class="fa fa-google-plus"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://www.behance.net/" target="_blank">
                            <i class="fa fa-behance"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://500px.com/" target="_blank">
                            <i class="fa fa-500px"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:icuihai@gmail.com" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="/#" target="_blank">
                            <i class="fa fa-rss"></i>
                        </a>
                    </div>
                
            </div>
<div >
<font size="2" color="red">本站总访问量<span id="busuanzi_value_site_pv"></span>次
本站访客数<span id="busuanzi_value_site_uv"></span>人次!</font>

</div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                @Untitled. All right reserved | Design & Hexo <a class="link dim white" href="http://www.icuihai.com/">Ich's Blog</a>
            </div>
        </div>
    </div>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>


<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>